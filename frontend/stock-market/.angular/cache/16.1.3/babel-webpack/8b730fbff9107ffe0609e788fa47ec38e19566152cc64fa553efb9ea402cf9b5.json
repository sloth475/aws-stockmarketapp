{"ast":null,"code":"import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction CompanyListComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const company_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", company_r4.companyId, \" - \", company_r4.name, \" \");\n  }\n}\nfunction CompanyListComponent_ul_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\")(1, \"li\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"li\")(6, \"strong\");\n    i0.ɵɵtext(7, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"li\")(10, \"strong\");\n    i0.ɵɵtext(11, \"CEO:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"li\")(14, \"strong\");\n    i0.ɵɵtext(15, \"Turnover:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.searchResult.companyId, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.searchResult.name, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.searchResult.ceo, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.searchResult.turnover, \" \");\n  }\n}\nfunction CompanyListComponent_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const stock_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", stock_r5.stockId, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", stock_r5.price, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", stock_r5.date, \" \");\n  }\n}\nfunction CompanyListComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2, \"Add Company\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 10);\n    i0.ɵɵlistener(\"submit\", function CompanyListComponent_div_27_Template_form_submit_3_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.addCompany());\n    });\n    i0.ɵɵelementStart(4, \"div\")(5, \"label\", 11);\n    i0.ɵɵtext(6, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function CompanyListComponent_div_27_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.newCompany.name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\")(9, \"label\", 13);\n    i0.ɵɵtext(10, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function CompanyListComponent_div_27_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.newCompany.code = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\")(13, \"label\", 15);\n    i0.ɵɵtext(14, \"CEO:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function CompanyListComponent_div_27_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.newCompany.ceo = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\")(17, \"label\", 17);\n    i0.ɵɵtext(18, \"Turnover:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"input\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function CompanyListComponent_div_27_Template_input_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.newCompany.turnover = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\")(21, \"label\", 19);\n    i0.ɵɵtext(22, \"Stockexchange:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function CompanyListComponent_div_27_Template_input_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.newCompany.stockexchange = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\")(25, \"button\", 21);\n    i0.ɵɵtext(26, \"Add\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function CompanyListComponent_div_27_Template_button_click_27_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.toggleCompanyForm());\n    });\n    i0.ɵɵtext(28, \"Cancel\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.newCompany.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.newCompany.code);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.newCompany.ceo);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.newCompany.turnover);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.newCompany.stockexchange);\n  }\n}\nexport let CompanyListComponent = /*#__PURE__*/(() => {\n  class CompanyListComponent {\n    constructor(http) {\n      this.http = http;\n      this.companies = [];\n      this.newCompany = {};\n      this.showCompanyForm = false;\n      this.stocks = [];\n      // showCompanyForm = false;\n      // toggleCompanyForm() {\n      //   this.showCompanyForm = !this.showCompanyForm;\n      // }\n      // openCompanyForm() {\n      //   this.showCompanyForm = true;\n      // }\n      // closeCompanyForm(submitted: boolean) {\n      //   if (submitted) {\n      //     console.log('Company added successfully@@@@SSSS!');\n      //   }\n      //   this.showCompanyForm = false;\n      // }\n      this.searchText = '';\n      // this.showCompanyForm = false;\n    }\n\n    toggleCompanyForm() {\n      this.showCompanyForm = !this.showCompanyForm;\n      this.newCompany = {}; // Reset the form fields when opening/closing the form\n    }\n\n    addCompany() {\n      console.log(\"-----\");\n      console.log('Add Company:', this.newCompany);\n      const payloads = {\n        \"ceo\": this.newCompany.ceo,\n        \"turnover\": this.newCompany.turnover,\n        \"companyId\": this.newCompany.code,\n        \"stockexchange\": this.newCompany.stockexchange,\n        \"name\": this.newCompany.name\n      };\n      const payload = JSON.stringify(payloads);\n      console.log(\"=====\", payload);\n      const url = 'https://hb6yiq7ovb.execute-api.ap-south-1.amazonaws.com/prod/company?company=101';\n      const headers = new HttpHeaders({\n        'Content-Type': 'application/json',\n        'x-api-key': 'knSTS5pD5K85wbnruXEo52cZF8CuIHe0amru3qxS'\n      });\n      this.http.post(url, payload, {\n        headers: headers\n      }).subscribe(response => {\n        console.log('Company added successfully:', response);\n        this.listCompanies();\n        // this.toggleCompanyForm();\n        this.newCompany = {};\n        this.showCompanyForm = false;\n      }, error => {\n        console.log('Error adding company:', error);\n      });\n    }\n    listCompanies() {\n      console.log(\"list compnay....\");\n      const headers = new HttpHeaders({\n        'Content-Type': 'application/json',\n        'x-api-key': 'knSTS5pD5K85wbnruXEo52cZF8CuIHe0amru3qxS'\n      });\n      const url = 'https://hb6yiq7ovb.execute-api.ap-south-1.amazonaws.com/prod/companys?company=101';\n      this.http.get(url, {\n        headers: headers\n      }).subscribe(response => {\n        this.companies = response;\n      }, error => {\n        console.log('Error getting  companies:', error);\n      });\n    }\n    searchCompany() {\n      console.log(\"sssss\");\n      if (!this.companyId) {\n        return;\n      }\n      const url = `https://hb6yiq7ovb.execute-api.ap-south-1.amazonaws.com/prod/company?companyId=${this.companyId}`;\n      console.log(\"search compnay....\");\n      const headers = new HttpHeaders({\n        'Content-Type': 'application/json',\n        'x-api-key': 'knSTS5pD5K85wbnruXEo52cZF8CuIHe0amru3qxS'\n      });\n      this.http.get(url, {\n        headers: headers\n      }).subscribe(response => {\n        this.searchResult = response;\n        // alert(JSON.stringify(this.searchResult)); // Print the company details\n      }, error => {\n        console.log('Error searching company:', error);\n        this.searchResult = null;\n      });\n      const url2 = `https://hb6yiq7ovb.execute-api.ap-south-1.amazonaws.com/prod/stocks?companyId=${this.companyId}`;\n      this.http.get(url2, {\n        headers: headers\n      }).subscribe(response => {\n        console.log('Stocks:', response);\n        this.stocks = response;\n      }, error => {\n        console.log('Error fetching stocks:', error);\n        this.stocks = []; // Clear the stock array if an error occurs\n      });\n    }\n    static #_ = this.ɵfac = function CompanyListComponent_Factory(t) {\n      return new (t || CompanyListComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CompanyListComponent,\n      selectors: [[\"app-company-list\"]],\n      decls: 28,\n      vars: 5,\n      consts: [[1, \"title\"], [1, \"header\"], [\"src\", \"./assets/logo.jpg\", \"alt\", \"Logo\", 1, \"logo\"], [1, \"button-container\"], [1, \"button-primary\", 3, \"click\"], [1, \"search-container\"], [\"type\", \"text\", \"placeholder\", \"Enter Company ID\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [3, \"submit\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"code\"], [\"type\", \"text\", \"id\", \"code\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"ceo\"], [\"type\", \"text\", \"id\", \"ceo\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"turnover\"], [\"type\", \"number\", \"id\", \"turnover\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"stockexchange\"], [\"type\", \"text\", \"id\", \"stockexchange\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\"], [\"type\", \"button\", 3, \"click\"]],\n      template: function CompanyListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h2\", 0);\n          i0.ɵɵtext(1, \"Stock Market App\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 1);\n          i0.ɵɵelement(3, \"img\", 2);\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function CompanyListComponent_Template_button_click_5_listener() {\n            return ctx.toggleCompanyForm();\n          });\n          i0.ɵɵtext(6, \"Add Company\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function CompanyListComponent_Template_button_click_7_listener() {\n            return ctx.listCompanies();\n          });\n          i0.ɵɵtext(8, \"List Companies\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 5)(10, \"input\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function CompanyListComponent_Template_input_ngModelChange_10_listener($event) {\n            return ctx.companyId = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"button\", 7);\n          i0.ɵɵlistener(\"click\", function CompanyListComponent_Template_button_click_11_listener() {\n            return ctx.searchCompany();\n          });\n          i0.ɵɵtext(12, \"Search\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(13, \"ul\");\n          i0.ɵɵtemplate(14, CompanyListComponent_li_14_Template, 2, 2, \"li\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(15, CompanyListComponent_ul_15_Template, 17, 4, \"ul\", 9);\n          i0.ɵɵelementStart(16, \"div\")(17, \"table\")(18, \"tr\")(19, \"th\");\n          i0.ɵɵtext(20, \"Stock Id \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"th\");\n          i0.ɵɵelementStart(22, \"th\");\n          i0.ɵɵtext(23, \" Price \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"th\");\n          i0.ɵɵtext(25, \" Date \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(26, CompanyListComponent_tr_26_Template, 7, 3, \"tr\", 8);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(27, CompanyListComponent_div_27_Template, 29, 5, \"div\", 9);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngModel\", ctx.companyId);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", ctx.companies);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.searchResult);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"ngForOf\", ctx.stocks);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showCompanyForm);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n      styles: [\".button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;margin-bottom:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}\"]\n    });\n  }\n  return CompanyListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}